// Two Sum
// Given nums array and target, return indices of two numbers that add up to target.

function two_sum(list[num32] nums, num32 target) -> list[num] {
    num n = nums.size();

    // i, j are num from range
    repeat i in range(0, n, 1) {
        repeat j in range(i + 1, n, 1) {

            // Handle result explicitly
            rox_result[num32] r1 = nums.at(i);

            if (isOk(r1)) {
                num32 v1 = getValue(r1);

                rox_result[num32] r2 = nums.at(j);
                if (isOk(r2)) {
                    num32 v2 = getValue(r2);

                    if (v1 + v2 == target) {
                        return [i, j];
                    }
                } else {
                    return [-1, -1];
                }
            } else {
                return [-1, -1];
            }
        }
    }
    return [-1, -1];
}

function main() -> none {
    // 2 is num64 by default. 2n32 is num32.
    list[num32] nums = [2n32, 7n32, 11n32, 15n32];
    num32 target = 9n32;

    list[num] result = two_sum(nums, target);

    // We expect [0, 1]
    if (result.size() == 2) {
        rox_result[num] r0 = result.at(0);
        rox_result[num] r1 = result.at(1);

        if (isOk(r0)) {
            if (isOk(r1)) {
                if (getValue(r0) == 0 and getValue(r1) == 1) {
                    print("Two Sum: Passed\n");
                    return none;
                }
            }
        }
    }

    print("Failed\n");
}
