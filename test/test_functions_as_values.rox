function add(int64 a, int64 b) -> int64 {
    return a + b;
}

function subtract(int64 a, int64 b) -> int64 {
    return a - b;
}

function apply(function(int64, int64) -> int64 f, int64 a, int64 b) -> int64 {
    return f(a, b);
}

function get_adder() -> function(int64, int64) -> int64 {
    return add;
}

function main() -> none {
    // Test assignment
    function(int64, int64) -> int64 op = add;
    print(op(10, 5)); // Expect 15.000000 (or just 15)

    op = subtract;
    print(op(10, 5)); // Expect 5.000000

    // Test passing as argument
    print(apply(add, 20, 10)); // Expect 30.000000
    print(apply(subtract, 20, 10)); // Expect 10.000000

    // Test returning function
    function(int64, int64) -> int64 adder = get_adder();
    print(adder(3, 4)); // Expect 7.000000
}